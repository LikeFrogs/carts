pico-8 cartridge // http://www.pico-8.com
version 29
__lua__

function _init()
	--initialize player
	player = {
		sprite = 1,
		x = 16,
		y = 48,

		dx = 0,
		dy = 0,
	}

	--control variables
	gravity = 0.3
	movementAcceleration = 0.5
	jumpAcceleration = 4
	maxHorizontalSpeed = 3
	maxFallSpeed = 2
	maxJumpSpeed = -4
end

function _update()
	--user input
	if btn(0) then 
		player.dx -= movementAcceleration
	end
	if btn(1) then 
		player.dx += movementAcceleration
	end
	if btn(2) then 
		player.y -= jumpAcceleration
	end

	--apply gravity
	player.dy += gravity;

	--apply max speeds
	if player.dx > maxHorizontalSpeed then
		player.dx = maxHorizontalSpeed
	end
	if player.dx < -maxHorizontalSpeed then
		player.dx = -maxHorizontalSpeed
	end
	if player.dy > maxFallSpeed then
		player.dy = maxFallSpeed
	end
	if player.dy < maxJumpSpeed then
		player.dy = maxJumpSpeed
	end

	--ground collision
	if player.y > 55 and player.dy > 0 then
		player.dy = 0
	end

	--apply accumulated acceleration
	player.x += player.dx
	player.y += player.dy
end

function _draw()
	cls()
	map(0,0)
	spr(player.sprite, player.x, player.y, 1, 1, false)
end

__gfx__
00000000ccaccacc7777777788888888cccccccc00000000cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000
00000000ca99999ccccccccc99999999cccccccc00000000ccccc17ccccccccc0000000000000000000000000000000000000000000000000000000000000000
00700700ca97997ccccccc7caaaaaaaacccccccc00000000cccc1777cccccccc0000000000000000000000000000000000000000000000000000000000000000
00077000ca99999cccccc7ccbbbbbbbbcccccccc00000000ccccc17ccccccccc0000000000000000000000000000000000000000000000000000000000000000
00077000ccaaaacccccccccc11111111cccccccc00000000cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000
00700700ccaaaacccc00000022222222cccccccc00000000cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000
00000000ccaccacc00000000cccccccccccccccc0000000017cccccccccccccc0000000000000000000000000000000000000000000000000000000000000000
00000000ccaccacc00000000cccccccccccccccc00000000cccccccccccccccc0000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404060404040404040404040604040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040406040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040704040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0404040404040404040404040404040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
